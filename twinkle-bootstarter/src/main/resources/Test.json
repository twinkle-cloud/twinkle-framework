{
  "ConnectorManager": {
    "ClassName": "com.twinkle.framework.connector.ConnectorManager",
    "ConnectorNames": [
      "TestConnector"
    ],
    "Connectors": [
      {
        "Name": "TestConnector",
        "ClassName": "com.twinkle.framework.connector.http.server.RestHttpServerConnector",
        "Description": "Connector Test1",
        "EndpointNames": [
          "testHelloworld",
          "testUserMgmt"
        ],
        "Endpoints": [
          {
            "Name": "testHelloworld",
            "ClassName": "com.twinkle.framework.connector.http.server.endpoint.RestHttpEndpoint",
            "Description": "Demo for hello world.",
            "RequestType": 3,
            "URL": "authsec/helloworld/{_addressId}",
            "RuleChain": "TestRuleChain",
            "Request": {
              "ClassName": "com.twinkle.framework.connector.http.endpoint.DefaultHttpRequest",
              "RequestParameters": [
                {
                  "HttpAttr": "_param1",
                  "NeAttr": "userName",
                  "DefaultValue": "cxj110"
                }
              ],
              "PathVariables": [
                {
                  "HttpAttr": "_addressId",
                  "NeAttr": "addressId"
                }
              ],
              "RequestBody": {
                "HttpAttr": "_request",
                "NeAttr": "userOrgInfo"
              }
            },
            "Response": {
              "ClassName": "com.twinkle.framework.connector.http.endpoint.RestHttpResponse",
              "ResultData": {
                "HttpAttr": "tempResult",
                "NeAttr": "userOrgInfo"
              }
            }
          },
          {
            "Name": "testUserMgmt",
            "ClassName": "com.twinkle.framework.connector.http.server.endpoint.RestHttpEndpoint",
            "Description": "Demo for TestUser.",
            "RequestType": 1,
            "URL": "authsec/user/{_userId}",
            "RuleChain": "UserRuleChain",
            "Request": {
              "ClassName": "com.twinkle.framework.connector.http.endpoint.DefaultHttpRequest",
              "PathVariables": [
                {
                  "HttpAttr": "_userId",
                  "NeAttr": "userId"
                }
              ]
            },
            "Response": {
              "ClassName": "com.twinkle.framework.connector.http.endpoint.RestHttpResponse",
              "ResultData": {
                "HttpAttr": "tempResult",
                "NeAttr": "position"
              }
            }
          }
        ]
      }
    ]
  },
  "RuleChainManager": {
    "ClassName": "com.twinkle.framework.ruleengine.RuleChainManager",
    "RuleChainNames": [
      "TestRuleChain",
      "UserRuleChain"
    ],
    "RuleChains": [
      {
        "Name": "TestRuleChain",
        "ClassName": "com.twinkle.framework.ruleengine.RuleChain",
        "RuleNames": [
          "TestDemoRule",
          "BeforeConversionLog",
          "TestConversionRule",
          "AfterConversionLog",
          "TestDB"
        ],
        "Rules": [
          {
            "Name": "TestDemoRule",
            "ClassName": "com.twinkle.framework.ruleengine.rule.AdornmentRule",
            "AdornOps": [
              "set password \"abcd1234\"",
              "set age \"50\"",
              "set assessId \"f8091fc001-6d50-00fc-eddf-fbac1f85bc\"",
              "set assessPaperId \"AADDSS\"",
              "set assessCategoryId \"GGFFJJ\""
            ]
          },
          {
            "Name": "BeforeConversionLog",
            "ClassName": "com.twinkle.framework.ruleengine.rule.LogAttributeRule",
            "LogLevel": "INFO",
            "Message": "Attribute before conversion are: ",
            "Attributes": ["userName","position","age","dept", "addressId", "userOrgInfo"]
          },
          {
            "Name": "TestConversionRule",
            "ClassName": "com.twinkle.framework.ruleengine.rule.AttributeConversionRule",
            "StructAttribute": "userOrgInfo",
            "StructAttributeToAttributeMap": [["age", "age", "100"], ["titles[0].dept", "dept"]],
            "AttributeToStructAttributeMap": [["addressId", "age", "50"], ["position","titles[0].position"]],
            "CreateStructAttributeIfNeeded": true
          },
          {
            "Name": "AfterConversionLog",
            "ClassName": "com.twinkle.framework.ruleengine.rule.LogAttributeRule",
            "LogLevel": "INFO",
            "Message": "Attribute after conversion are: ",
            "NullAlso": "true",
            "ConvertToJson": "true",
            "Attributes": ["userName","position","age","dept", "addressId", "userOrgInfo"]
          },
          {
            "Name": "TestDB",
            "ClassName": "com.twinkle.framework.ruleengine.rule.DataCenterOperationRule",
            "ExecutorName": "DoSQLTest"
          }
        ]
      },
      {
        "Name": "UserRuleChain",
        "ClassName": "com.twinkle.framework.ruleengine.RuleChain",
        "RuleNames": [
          "UserTest1",
          "UserTest2"
        ],
        "Rules": [
          {
            "Name": "UserTest1",
            "ClassName": "com.twinkle.framework.ruleengine.rule.DemoIRule",
            "Attribute": "position"
          },
          {
            "Name": "UserTest2",
            "ClassName": "com.twinkle.framework.ruleengine.rule.LogAttributeRule",
            "LogLevel": "INFO",
            "Message": "Attribute after conversion are: ",
            "NullAlso": "true",
            "ConvertToJson": "true",
            "Attributes": ["userId","position"]
          }
        ]
      }
    ]
  },
  "DataCenterManager": {
    "ClassName": "com.twinkle.framework.datacenter.DataCenterManager",
    "StatementNames": [
      "TestPgSQL",
      "TestMySQL"
    ],
    "Statements": [
      {
        "Name": "TestPgSQL",
        "ClassName": "com.twinkle.framework.datacenter.statement.UpdateSqlStatement",
        "DestTable": "U_USER",
        "IsBatch": false,
        "DataSource": "usermgmt",
        "ConditionFields": [
          ["userId", 4]
        ],
        "WhereClause": "id=:userId",
        "FieldMap": [
          ["AGE", 4, "userId", 90],
          ["GENDER", -7, "gender", 1]
        ]
      },
      {
        "Name": "TestMySQL",
        "ClassName": "com.twinkle.framework.datacenter.statement.UpdateSqlStatement",
        "DestTable": "PER_TEST1",
        "IsBatch": false,
        "DataSource": "assessmgmt",
        "ConditionFields": [
          ["assessId", 12]
        ],
        "WhereClause": "id=:assessId",
        "FieldMap": [
          ["ASSESS_PAPER_ID", 12, "assessPaperId"]
        ]
      }
    ],
    "ExecutorNames": [
      "DoSQLTest"
    ],
    "Executors": [
      {
        "Name": "DoSQLTest",
        "ClassName": "com.twinkle.framework.datacenter.executor.DefaultStatementExecutor",
        "StatementNames": [
          "TestPgSQL",
          "TestMySQL"
        ]
      }
    ]
  },
  "AttributeSet": [
    [
      "userName",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "userId",
      "com.twinkle.framework.core.lang.LongAttribute",
      ""
    ],
    [
      "password",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "position",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "dept",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "age",
      "com.twinkle.framework.core.lang.IntegerAttribute",
      ""
    ],
    [
      "gender",
      "com.twinkle.framework.core.lang.IntegerAttribute",
      ""
    ],
    [
      "addressId",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "assessId",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "assessPaperId",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "assessCategoryId",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "resultData",
      "com.twinkle.framework.core.lang.StringAttribute",
      ""
    ],
    [
      "userOrgInfo",
      "com.twinkle.framework.struct.lang.StructAttrAttribute",
      "TestDemo:TestRequest"
    ]
  ],
  "StructAttributeManager": {
    "ClassName": "com.twinkle.framework.context.manager.StructAttributeManager",
    "NameSpaceNames": [
      "TestDemo"
    ],
    "NameSpaces": [
      {
        "NameSpace": "TestDemo",
        "Types": [
          {
            "TypeName": "TestRequest",
            "Attributes": [
              {
                "Name": "name",
                "Type": "string",
                "Optional": "false"
              },
              {
                "Name": "gender",
                "Type": "int",
                "Optional": "true"
              },
              {
                "Name": "age",
                "Type": "int",
                "Optional": "false"
              },
              {
                "Name": "titles",
                "Type": "TestDemo:title[]",
                "Optional": "false"
              }
            ]
          },
          {
            "TypeName": "title",
            "Attributes": [
              {
                "Name": "dept",
                "Type": "string",
                "Optional": "false"
              },
              {
                "Name": "position",
                "Type": "string",
                "Optional": "false"
              }
            ]
          }
        ]
      }
    ]
  }
}